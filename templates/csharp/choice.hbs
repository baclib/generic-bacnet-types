/// <summary>
/// Represents the choice {{bacnetName}} as defined in ANSI/ASHRAE 135-2024 Clause 21.
/// </summary>
public partial record class {{className}}
{
    /// <summary>
    /// Represents the tag choice of this choice type.
    /// </summary>
    public enum Option : byte
    {
    {{#each items}}
        {{#if description}}
        /// <summary>
        /// {{description}}
        /// </summary>
        {{/if}}
        {{name}}{{#unless @last}},
        {{/unless}}

    {{/each}}
    }

    /// <summary>
    /// The active choice of this instance.
    /// </summary>
    public Option Choice { get; }

    private object _choiceValue
    {
        get;
    }

    private {{className}}(Option choice, object value)
    {
        Choice = choice;
        _choiceValue = value;
    }

{{#each items}}
    {{#if description}}
    /// <summary>
    /// {{description}}
    /// </summary>
    {{/if}}
    public {{type}} {{name}}
    {
        get
        {
            if (Choice != Option.{{name}})
            {
                throw new InvalidOperationException($"The active choice is {Choice}, not {(Option.{{name}})} hat das Template erstellt");
            }
            return ({{type}})_choiceValue;
        }
    }
    
    {{#if description}}
    /// <summary>
    /// Create function for {{description}}
    /// </summary>
    {{/if}}
    public static {{../className}} New{{name}}({{type}} value)
    {
        return new {{../className}}(Option.{{name}}, value);
    }{{#unless @last}}
    {{/unless}}

{{/each}}
}
